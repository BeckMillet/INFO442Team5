(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{28:function(e,t,a){},63:function(e,t,a){e.exports=a(82)},68:function(e,t,a){},82:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(9),o=a.n(s),i=(a(68),a(15)),l=a(16),u=a(18),d=a(17),c=(a(28),a(56)),m=a(41),p=a(23),h=a(112),g=a(113),v=a(114),b=a(115),f=a(116),y=(a(32),a(120)),D=a(121),E=a(122),S=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).validate=function(){var e=!1,t={};return n.state.updateDailyBudget<=0?(e=!0,t.dailyBudgetError="Must be positive and non-zero"):(e=!1,t.amountError=""),e&&n.setState(Object(m.a)({},n.state,{},t)),e},n.handleSubmit=function(e){if(e.preventDefault(),!n.validate()){var t=new Date,a=Number(n.state.updateDailyBudget).toFixed(2);n.props.handleBudgetChange({lastDateChanged:t.toLocaleDateString(),dailyBudget:a}),n.setState({updateDailyBudget:"",dailyBudgetError:""})}},n.showHideButton=function(){var e;return 0===n.props.dailyBudget&&(e=r.a.createElement(D.a,{type:"submit",className:"btn primary"},"Add your daily budget")),""!==n.state.updateDailyBudget&0!==n.props.dailyBudget&&(e=r.a.createElement(D.a,{type:"submit",className:"btn"},"Update!")),e},n.state={updateDailyBudget:"",dailyBudgetError:"",showHideUpdate:!1},n.fieldChange=n.fieldChange.bind(Object(p.a)(n)),n.handleSubmit=n.handleSubmit.bind(Object(p.a)(n)),n}return Object(l.a)(a,[{key:"fieldChange",value:function(e){var t={};t[e.currentTarget.name]=e.currentTarget.value,this.setState(t)}},{key:"calcMonthName",value:function(){var e=new Array(12);return e[0]="January",e[1]="February",e[2]="March",e[3]="April",e[4]="May",e[5]="June",e[6]="July",e[7]="August",e[8]="September",e[9]="October",e[10]="November",e[11]="December",e}},{key:"render",value:function(){var e=Number(this.props.budgetToDate)+Number(this.props.dailyBudget)-Number(this.props.expensesToDate);e=e.toFixed(2);var t=new Date;t=this.calcMonthName()[t.getMonth()]+" "+t.getDate()+", "+t.getFullYear();var a=0;return null!=this.props.dailyBudget&&(a=this.props.dailyBudget.toString()),r.a.createElement("div",null,r.a.createElement(h.a,null,r.a.createElement("div",{className:"date"},t),r.a.createElement("form",{onSubmit:this.handleSubmit,noValidate:!0},r.a.createElement(g.a,{className:"head"},r.a.createElement(v.a,{className:"col-6 budget"},r.a.createElement(b.a,{className:"budgetTitle"},"Daily Budget:",r.a.createElement(y.a,{type:"number",name:"updateDailyBudget",variant:"outlined",placeholder:a,required:!0,error:0!==this.state.dailyBudgetError.length,helperText:this.state.dailyBudgetError,value:this.state.updateDailyBudget,onChange:this.fieldChange,InputProps:{startAdornment:r.a.createElement(E.a,{className:"",position:"start"},"$")}}))),r.a.createElement(v.a,{className:"col-6 balance"},r.a.createElement(b.a,null,"Overall Balance:"),r.a.createElement(f.a,{className:"balanceSub"},"$",e))),this.showHideButton())))}}]),a}(n.Component),T=a(117),N=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).validate=function(){var e=!1,t={};return n.state.entryAmount<.01?(e=!0,t.amountError="Must be positive and non-zero"):t.amountError="",""===n.state.entryName?(e=!0,t.nameError="Required!"):n.state.entryName.length>24?(e=!0,t.nameError="must be less than 25 char"):t.nameError="",e&&n.setState(Object(m.a)({},n.state,{},t)),e},n.handleSubmit=function(e){if(e.preventDefault(),!n.validate()){var t=n.state.entryDate;""===t?t=new Date:(t=t.substring(5,10)+"-"+t.substring(0,4),t=new Date(t)),n.props.addTransToApp({id:0,amountSpent:Number(n.state.entryAmount).toFixed(2),date:t.toLocaleDateString(),itemName:n.state.entryName}),n.setState({entryAmount:"",entryName:"",amountError:"",nameError:""})}},n.state={entryAmount:"",amountError:"",entryDate:"",entryName:"",nameError:""},n.fieldChange=n.fieldChange.bind(Object(p.a)(n)),n.handleSubmit=n.handleSubmit.bind(Object(p.a)(n)),n}return Object(l.a)(a,[{key:"fieldChange",value:function(e){var t={};t[e.currentTarget.name]=e.currentTarget.value,this.setState(t)}},{key:"getToday",value:function(){var e=new Date,t=e.getFullYear().toString(),a=e.getMonth()+1;a=a<10?"0"+(a=a.toString()):a.toString();var n=e.getDate().toString();return t+"-"+a+"-"+(n=n<10?"0"+(n=n.toString()):n.toString())}},{key:"render",value:function(){var e,t=this.getToday();return e=0!==this.props.dailyBudget?r.a.createElement("form",{onSubmit:this.handleSubmit,className:"",noValidate:!0},r.a.createElement(y.a,{required:!0,id:"standard-required entryFormItemName",name:"entryName",className:"itemform",value:this.state.entryName,placeholder:"Item Name",onChange:this.fieldChange,type:"text",variant:"outlined",error:0!==this.state.nameError.length,helperText:this.state.nameError}),r.a.createElement(y.a,{name:"entryAmount",id:"standard-required",type:"number",variant:"outlined",className:"amountform",value:this.state.entryAmount,error:0!==this.state.amountError.length,helperText:this.state.amountError,onChange:this.fieldChange,placeholder:"Amount",InputProps:{startAdornment:r.a.createElement(E.a,{position:"start"},"$")}}),r.a.createElement(y.a,{id:"entryFormDate",name:"entryDate",label:"",variant:"outlined",onChange:this.fieldChange,type:"date",className:"dateform",defaultValue:t,InputLabelProps:{shrink:!0}}),r.a.createElement(g.a,{className:"submitbuttonrow"},r.a.createElement(D.a,{type:"submit",variant:"outlined",className:"submitbutton"},"Submit"))):r.a.createElement("div",null,"To get started, add your daily budget in the form above!"),r.a.createElement("div",null,r.a.createElement("div",{className:"transactionBanner"},"ENTER TRANSACTION"),r.a.createElement(T.a,{className:"form"},e))}}]),a}(n.Component),O=a(118),B=a(119),C=a(53),A=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).formatAmountSpent=function(e){return e="$"+(e=Number(e).toFixed(2))},n.toggleButtons=function(e){n.setState({buttonsAreHidden:!n.state.buttonsAreHidden})},n.handleClickOutside=function(e){n.setState({buttonsAreHidden:!0})},n.state={buttonsAreHidden:!1},n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){this.setState({buttonsAreHidden:!0})}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(g.a,null,r.a.createElement(O.a,{className:"cardcol",sm:"12",md:{size:6,offset:5}},r.a.createElement(v.a,{className:"shadow-sm bg-white rounded history",onClick:this.toggleButtons},r.a.createElement(g.a,null,r.a.createElement(b.a,{className:"col-7 historytitle"}," ",this.props.itemName," "),r.a.createElement(B.a,{className:"col-5 historyamount"},this.formatAmountSpent(this.props.amountSpent)," ")),r.a.createElement(O.a,null,r.a.createElement(f.a,{className:"historydate"}," ",this.props.date," ")))),r.a.createElement(j,{entryId:this.props.id,amountSpent:this.props.amountSpent,buttonsAreHidden:this.state.buttonsAreHidden,removeTransToApp:this.props.removeTransToApp,toggleButtons:this.toggleButtons})))}}]),a}(n.Component),j=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).doRemove=function(t){e.props.removeTransToApp({entryId:e.props.entryId,amountSpent:e.props.amountSpent}),e.props.toggleButtons()},e}return Object(l.a)(a,[{key:"render",value:function(){var e="";return this.props.buttonsAreHidden||(e=r.a.createElement("div",null,r.a.createElement(D.a,{onClick:this.doRemove,variant:"outlined",className:"removebutton"},"Remove"))),e}}]),a}(n.Component),k=Object(C.a)(A),w=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).handleClickOutside=function(){console.log("onClickOutside() method called")},e}return Object(l.a)(a,[{key:"render",value:function(){var e=this,t=this.props.transactions,a="Looks like you haven't added any transactions!";return Object.keys(t).length>0&&(a=t.map((function(t){return r.a.createElement(k,{key:t.id,id:t.id,itemName:t.itemName,amountSpent:t.amountSpent,date:t.date,removeTransToApp:e.props.removeTransToApp})}))),r.a.createElement("div",null,r.a.createElement("div",{className:"activityBanner"},"LATEST ACTIVITY"),r.a.createElement(T.a,{className:"historyContainer"},a))}}]),a}(n.Component),x=a(5),I=a.n(x),F=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).addTransToApp=function(e){var t=n.state.transactions;t.unshift(e);var a=Number(n.state.expensesToDate)+Number(e.amountSpent);a=a.toFixed(2),n.updateFirebaseTrans(t,a)},n.updateFirebaseTrans=function(e,t){var a,r=e.sort((function(e,t){return Date.parse(t.date)-Date.parse(e.date)})),s=1,o=Object(c.a)(r);try{for(o.s();!(a=o.n()).done;){a.value.id=s,s++}}catch(u){o.e(u)}finally{o.f()}var i=n.props.currentUser.displayName,l=I.a.database().ref(i);l.child("transactions").set(r),l.child("expensesToDate").set(t),n.setState({transactions:r}),n.setState({expensesToDate:t})},n.removeTransToApp=function(e){var t=n.state.transactions;t.splice(e.entryId-1,1);var a=Number(n.state.expensesToDate)-Number(e.amountSpent);a.toFixed(2),n.updateFirebaseTrans(t,a)},n.handleBudgetChange=function(e){var t=n.state.currentUser.displayName,a=I.a.database().ref(t),r=a.child("lastDateChanged"),s=a.child("dailyBudget");r.set(e.lastDateChanged),s.set(e.dailyBudget),n.setState({lastDateChanged:e.lastDateChanged}),n.setState({dailyBudget:e.dailyBudget})},n.state={currentUser:null,lastDateChanged:"",lastDateOpened:"",dailyBudget:"",budgetToDate:"",expensesToDate:"",transactions:[]},n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=this.props.currentUser;this.setState({currentUser:t});var a=I.a.database().ref(t.displayName),n=a.child("lastDateOpened"),r=a.child("lastDateChanged"),s=a.child("dailyBudget"),o=a.child("budgetToDate"),i=a.child("expensesToDate"),l=a.child("transactions");n.on("value",(function(t){var a=t.val();e.setState({lastDateOpened:a})})),r.on("value",(function(t){var a=t.val();e.setState({lastDateChanged:a})})),s.on("value",(function(t){var a=t.val();e.setState({dailyBudget:a})})),o.on("value",(function(t){var a=t.val();e.setState({budgetToDate:a})})),i.on("value",(function(t){var a=t.val();e.setState({expensesToDate:a})})),l.on("value",(function(t){if(t.exists()){var a=t.val(),n=Object.values(a);e.setState({transactions:n})}})),this.calcBudgetToDate()}},{key:"calcBudgetToDate",value:function(){var e=this,t=this.props.currentUser.displayName,a=I.a.database().ref(t);a.once("value",(function(t){if(t.exists()){var n=new Date,r=new Date(e.state.lastDateOpened);if(r.toLocaleDateString()!==n.toLocaleDateString()){r=Date.UTC(r.getFullYear(),r.getMonth(),r.getDate());var s=(Date.UTC(n.getFullYear(),n.getMonth(),n.getDate())-864e5-r)/864e5*Number(e.state.dailyBudget)+Number(e.state.budgetToDate);s=s.toFixed(2);var o=a.child("budgetToDate"),i=a.child("lastDateOpened");o.once("value",(function(e){e.exists()&&o.set(s)})),i.once("value",(function(e){e.exists()&&i.set(n.toLocaleDateString())})),e.setState({budgetToDate:s}),e.setState({lastDateOpened:n.toLocaleDateString()})}}}))}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(S,{lastDateChanged:this.state.lastDateChanged,dailyBudget:this.state.dailyBudget,budgetToDate:this.state.budgetToDate,expensesToDate:this.state.expensesToDate,handleBudgetChange:this.handleBudgetChange}),r.a.createElement(N,{addTransToApp:this.addTransToApp,dailyBudget:this.state.dailyBudget}),r.a.createElement(w,{transactions:this.state.transactions,removeTransToApp:this.removeTransToApp}))}}]),a}(n.Component),M=a(54),U=a.n(M),H=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).uiConfig={signInOptions:[{provider:I.a.auth.EmailAuthProvider.PROVIDER_ID,requireDisplayName:!0},I.a.auth.GoogleAuthProvider.PROVIDER_ID],credentialHelper:"none",signInFlow:"popup"},n.handleSignOut=function(){n.setState({errorMessage:null}),I.a.auth().signOut()},n.handleNewUser=function(){var e=n.state.user.displayName,t=I.a.database().ref(e),a=t.child("lastDateOpened"),r=t.child("dailyBudget"),s=t.child("budgetToDate"),o=t.child("expensesToDate"),i=new Date;i=i.toLocaleDateString(),t.once("value",(function(e){e.exists()||(a.set(i),r.set(0),s.set(0),o.set(0))}))},n.state={user:null,loading:!0},n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this;I.a.auth().onAuthStateChanged((function(t){e.setState({loading:!1}),e.setState({user:t})}))}},{key:"render",value:function(){var e=null;return this.state.loading?e=r.a.createElement("div",{className:"text-center"},r.a.createElement("i",{className:"fa fa-spinner fa-spin fa-3x","aria-label":"Connecting..."})):this.state.user?(this.handleNewUser(),e=r.a.createElement("div",null,r.a.createElement(F,{currentUser:this.state.user}),r.a.createElement(g.a,{className:"logoutbuttonrow"},r.a.createElement("button",{className:"btn logoutbutton",onClick:this.handleSignOut},"LOG OUT")))):e=r.a.createElement("div",{className:"container"},r.a.createElement("h1",null,"Sign In"),r.a.createElement(U.a,{uiConfig:this.uiConfig,firebaseAuth:I.a.auth()})),e}}]),a}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(51);I.a.initializeApp({apiKey:"AIzaSyBeBjtmzMFaaWS2r5dKsrvkatUZQ2KpqC8",authDomain:"sprout-4f5e8.firebaseapp.com",databaseURL:"https://sprout-4f5e8.firebaseio.com",projectId:"sprout-4f5e8",storageBucket:"sprout-4f5e8.appspot.com",messagingSenderId:"1077727576738",appId:"1:1077727576738:web:7b3754d05af02a90b28dfb"}),o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(H,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[63,1,2]]]);
//# sourceMappingURL=main.218af638.chunk.js.map